const c=a=>{if(a.length)return Math.min(...a)},i=a=>{if(a.length)return Math.max(...a)};function d(a,e=300){let t;return(...r)=>{clearTimeout(t),t=setTimeout(()=>{a.apply(this,r)},e)}}const g=()=>{let a=document.getElementsByClassName("facet");Array.from(a).forEach(e=>{e.getElementsByClassName("collapse")[0].addEventListener("click",r=>{e.classList.toggle("collapsed")})})},v=()=>{let a=document.getElementsByClassName("facet");Array.from(a).forEach(e=>{let t=e.getElementsByClassName("show-all")[0];t&&t.addEventListener("click",r=>{console.log("Checked show all"),r.preventDefault(),e.classList.toggle("show-all");let m=e.getElementsByTagName("p");Array.from(m).forEach(n=>{n.classList.remove("hide")}),t.classList.add("hide")})})},y=()=>{let a=document.querySelector(".date-filter-form"),e=document.querySelector("input[name='year_min']"),t=document.querySelector("input[name='year_max']");if(!e||!t)return;if(!e.value||!t.value){let n=document.querySelectorAll(".facet p[data-year]"),l=[];Array.from(n).forEach(u=>{if(u.dataset.year){if(u.dataset.year==0){console.log("Skipping 0 year");return}l.push(u.dataset.year)}});let o=c(l),s=i(l);e.value=o,t.value=s}const r=d(()=>{a.submit()},700);$(".date-slider").slider({range:!0,min:1793,max:2015,values:[$('input[name="year_min"]').val(),$('input[name="year_max"]').val()],slide:function(n,l){$('input[name="year_min"]').val(l.values[0]),$('input[name="year_max"]').val(l.values[1]),r()}}),document.getElementById("date-submit-button").addEventListener("click",n=>{if(n.preventDefault(),n.stopPropagation(),e.value<1793||e.value>2015||t.value<1793||t.value>2015){let o=e.value,s=t.value;e.value=c([i([o,1793]),2015]),t.value=c([i([s,1793]),2015])}if(e.value>t.value){let o=e.value,s=t.value;e.value=s,t.value=o,console.log("Flipping years")}const l=new URL(window.location);l.searchParams.set("year_min",e.value),l.searchParams.set("year_max",t.value),window.location.href=l.toString()})},f=()=>{document.querySelector(".results-count").scrollIntoView()},h=()=>{let a=document.getElementById("search-bar-clear"),e=document.getElementById("search-query");a&&a.addEventListener("click",t=>{t.preventDefault(),e.value=""})},p=()=>{let a=document.getElementById("results-sort");a&&a.addEventListener("change",t=>{let r=t.target.value;window.location.href=r}),g(),y(),v();let e=document.querySelector("a.page-number");e&&e.addEventListener("click",f),h()};document.addEventListener("DOMContentLoaded",p);
